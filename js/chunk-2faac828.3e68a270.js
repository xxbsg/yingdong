(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2faac828"],{"04e1":function(t,e,r){"use strict";var n=r("7afa");function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!==typeof t)throw new a("Invalid token specified");e=e||{};var r=!0===e.header?0:1;try{return JSON.parse(n(t.split(".")[r]))}catch(o){throw new a("Invalid token specified: "+o.message)}},t.exports.InvalidTokenError=a},"07ac":function(t,e,r){var n=r("23e7"),a=r("6f53").values;n({target:"Object",stat:!0},{values:function(t){return a(t)}})},"0994":function(t,e,r){},"6f53":function(t,e,r){var n=r("83ab"),a=r("df75"),o=r("fc6a"),i=r("d1e7").f,s=function(t){return function(e){var r,s=o(e),u=a(s),c=u.length,l=0,d=[];while(c>l)r=u[l++],n&&!i.call(s,r)||d.push(t?[r,s[r]]:s[r]);return d}};t.exports={entries:s(!0),values:s(!1)}},"7afa":function(t,e,r){var n=r("9b81");function a(t){return decodeURIComponent(n(t).replace(/(.)/g,(function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return a(e)}catch(r){return n(e)}}},"7db0":function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").find,o=r("44d2"),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},"9b81":function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){this.message=t}function a(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,o,i=0,s=0,u="";o=e.charAt(s++);~o&&(a=i%4?64*a+o:o,i++%4)?u+=String.fromCharCode(255&a>>(-2*i&6)):0)o=r.indexOf(o);return u}n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||a},"9ed6":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-nav-bar",{attrs:{title:"登录"}}),r("ValidationObserver",{ref:"form"},[r("ValidationProvider",{attrs:{rules:"required|mobile",name:"手机号"}},[r("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}},[r("i",{staticClass:"iconfont icon-shouji",attrs:{slot:"left-icon"},slot:"left-icon"})])],1),r("ValidationProvider",{attrs:{rules:"required|code",name:"验证码"}},[r("van-field",{attrs:{label:"验证码",placeholder:"请输入验证码"},model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}},[r("i",{staticClass:"iconfont icon-mima",attrs:{slot:"left-icon"},slot:"left-icon"}),t.codefas?r("van-count-down",{attrs:{slot:"button",time:6e3,format:"ss s"},on:{finish:t.guanbi},slot:"button"}):t._e(),t.codefas?t._e():r("van-button",{attrs:{slot:"button",size:"small",type:"primary",disabled:t.codefas},on:{click:t.fasong},slot:"button"},[t._v("发送验证码")])],1)],1)],1),r("van-row",{attrs:{type:"flex",justify:"center",align:"center"}},[r("van-button",{staticClass:"denglu",attrs:{type:"info"},on:{click:t.onlogin}},[t._v("登录")])],1)],1)},a=[],o=(r("7db0"),r("07ac"),r("96cf"),r("1da1")),i=r("c24f"),s=r("7bb1"),u=r("04e1"),c=r.n(u),l={data:function(){return{codefas:!1,user:{mobile:"13911111111",code:"246810"}}},methods:{guanbi:function(){this.codefas=!1},fasong:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])(this.user.mobile,"required|mobile",{name:"手机号"});case 2:if(e=t.sent,e.valid){t.next=6;break}return this.$toast(e.errors[0]),t.abrupt("return");case 6:return t.next=8,Object(i["a"])({mobile:this.user.mobile});case 8:if(r=t.sent,void 0!==r){t.next=11;break}return t.abrupt("return");case 11:console.log(r),"OK"===r.message&&(this.codefas=!0);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onlogin:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.form.validate();case 2:if(e=t.sent,console.log(this.$refs.form),e){t.next=8;break}return r=Object.values(this.$refs.form.errors).find((function(t){return t[0]}))[0],this.$toast.fail(r),t.abrupt("return");case 8:return this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.prev=9,t.next=12,Object(i["c"])(this.user);case 12:n=t.sent,console.log(n.data),a=c()(n.data.token),console.log(a),n.data["user_id"]=a.user_id,this.$store.commit("addtoken",n.data),this.$toast.success({message:"登陆成功",onClose:function(){console.log(o.$router.currentRoute.query.return),o.$router.currentRoute.query.return?o.$router.push(o.$router.currentRoute.query.return):o.$router.push("/")}}),t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](9),console.log(t.t0),this.$toast.fail("登录失败");case 25:case"end":return t.stop()}}),t,this,[[9,21]])})));function e(){return t.apply(this,arguments)}return e}()}},d=l,f=(r("b3a0"),r("2877")),p=Object(f["a"])(d,n,a,!1,null,"13f973ce",null);e["default"]=p.exports},b3a0:function(t,e,r){"use strict";var n=r("0994"),a=r.n(n);a.a},c24f:function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"f",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"j",(function(){return c})),r.d(e,"b",(function(){return l})),r.d(e,"e",(function(){return d})),r.d(e,"g",(function(){return f})),r.d(e,"i",(function(){return p})),r.d(e,"h",(function(){return h}));var n=r("b775"),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get";return Object(n["a"])({url:r,method:a,data:t,parmas:e})},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])({url:"/app/v1_0/authorizations",method:"POST",data:t,parmas:e})},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{},parmas:{}};return a(t.data,t.parmas,"/app/v1_0/sms/codes/".concat(t.mobile))},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])({url:"/app/v1_0/user",method:"get",data:t,parmas:e})},u=function(t){return Object(n["a"])({url:"/app/v1_0/user/channels",method:"PUT",data:t})},c=function(t){return Object(n["a"])({url:"/app/v1_0/user/profile",data:t,method:"GET"})},l=function(t){return Object(n["a"])({url:"/app/v1_0/user/photo",method:"patch",data:t})},d=function(t){return Object(n["a"])({url:"/app/v1_0/user/profile",method:"PATCH",data:t})},f=function(t){return Object(n["a"])({url:"/app/v1_0/user/articles",method:"GET",params:t})},p=function(t){return Object(n["a"])({url:"/app/v1_0/article/collections",method:"GET",params:t})},h=function(t){return Object(n["a"])({url:"/app/v1_0/user/histories",method:"GET",params:t})}}}]);
//# sourceMappingURL=chunk-2faac828.3e68a270.js.map